<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-cart-notification.css' | asset_url }}" media="print" onload="this.media='all'">

{%- if settings.predictive_search_enabled -%}
  <link rel="stylesheet" href="{{ 'component-price.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

{%- if section.settings.menu_type_desktop == 'mega' -%}
  <link rel="stylesheet" href="{{ 'component-mega-menu.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

<style>
  header-drawer {
    justify-self: start;
    margin-left: -1.2rem;
  }

  {%- if section.settings.sticky_header_type == 'reduce-logo-size' -%}
    .scrolled-past-header .header__heading-logo-wrapper {
      width: 75%;
    }
  {%- endif -%}

  {%- if section.settings.menu_type_desktop != "drawer" -%}
    @media screen and (min-width: 990px) {
      header-drawer {
        display: none;
      }
    }
  {%- endif -%}
</style>

<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

{% liquid
  assign header_tag = 'div'
  if section.settings.sticky_header_type != 'none'
    assign header_tag = 'sticky-header'
  endif
%}

<{{ header_tag }}
  {% if header_tag == 'sticky-header' %}
    data-sticky-type="{{ section.settings.sticky_header_type }}"
  {% endif %}
  class="header-wrapper color-{{ section.settings.color_scheme }} gradient"
>
  <header class="header page-width">
    <a href="{{ routes.root_url }}" class="header__heading-link link link--text focus-inset">
      <span class="h2">{{ section.settings.logo_text }}</span>
    </a>

    {%- if section.settings.menu != blank -%}
      {% if section.settings.menu_type_desktop == 'dropdown' %}
        {% render 'header-dropdown-menu' %}
      {% elsif section.settings.menu_type_desktop == 'mega' %}
        {% render 'header-mega-menu' %}
      {% endif %}
    {%- endif -%}

    <a href="{{ routes.cart_url }}" class="header__icon header__icon--cart link focus-inset">
      {% if cart == empty %}
        <span class="svg-wrapper">{{ 'icon-cart-empty.svg' | inline_asset_content }}</span>
      {% else %}
        <span class="svg-wrapper">{{ 'icon-cart.svg' | inline_asset_content }}</span>
      {% endif %}
      <span class="visually-hidden">{{ 'templates.cart.cart' | t }}</span>
      {%- if cart != empty -%}
        <div class="cart-count-bubble">
          <span aria-hidden="true">{{ cart.item_count }}</span>
        </div>
      {%- endif -%}
    </a>
  </header>
</{{ header_tag }}>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "text",
      "id": "logo_text",
      "label": "Logo Text",
      "default": "TISSO VISION"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Main menu",
      "default": "main-menu"
    },
    {
      "type": "select",
      "id": "menu_type_desktop",
      "label": "Menu style",
      "options": [
        { "value": "dropdown", "label": "Dropdown" },
        { "value": "mega", "label": "Mega menu" },
        { "value": "drawer", "label": "Drawer" }
      ],
      "default": "dropdown"
    },
    {
      "type": "select",
      "id": "sticky_header_type",
      "label": "Sticky header",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "on-scroll-up", "label": "On scroll up" },
        { "value": "always", "label": "Always" },
        { "value": "reduce-logo-size", "label": "Reduce logo size" }
      ],
      "default": "on-scroll-up"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    }
  ],
  "blocks": [
    {
      "type": "link",
      "name": "Navigation link",
      "settings": [
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        }
      ]
    }
  ],
  "max_blocks": 5,
  "presets": [
    {
      "name": "Header"
    }
  ]
}
{% endschema %}
